{
  "hash": "475b2b7cde3471a9cd2c687e0d4e23ff",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take home Exercise 3\"\nauthor: \"Yang Lu\"\ndate: \"15 May 2025\"\ndate-modified: \"last-modified\"\nformat: html\neditor: visual\nexecute: \n  eval: true  \n  echo: true  \n  warning: false \n  freeze: true \n---\n\n\n\n# VAST Challenge 2025-Mini-Challenge 3\n\nFor the exercise, our group will choose MC 3 as our main topic, the detail background referring to [VAST MC3](https://vast-challenge.github.io/2025/MC3.html)\n\n## 1.0 Background\n\n**Oceanus: From Fishing Nets to Tourism Tensions**\n\nOnce defined by its fishing traditions, Oceanus has transformed dramatically in the last decade. After a crackdown on illegal fishing, those involved redirected investments toward ocean tourism, creating community friction. When international star Sailor Shift announced plans to film locally, investigative journalist Clepper Jessen uncovered troubling connections around the temporary closure of Nemo Reef. His work exposed expedited approvals and secretive arrangements linking island officials, Sailor's team, influential local families, and conservationists The Green Guardians—suggesting a story of corruption hiding beneath paradise's surface.\n\n### **2.0 Overall Tasks**\n\nClepper has built a knowledge graph from two weeks of intercepted radio communications in Oceanus. Here are the key tasks to be analyzed:\n\n**Task 1: Temporal Communication Patterns**\n\n1.  Create visual analytics to identify daily patterns in communication timing\n\n2.  Analyze how these patterns changed over the two-week observation period\n\n3.  Select a specific entity and determine who influences them based on these patterns\n\n**Task 2: Relationship Analysis**\n\n1.  Develop visualizations to explore connections between vessels and people\n\n2.  Identify closely associated groups\n\n3.  Determine predominant topics for each group (e.g., environmentalism, Sailor Shift, fishing/leisure vessels)\n\n**Task 3: Pseudonym Identification**\n\n1.  Expand visualizations to reveal who is using pseudonyms\n\n2.  Identify known pseudonyms (\"Boss\", \"The Lookout\") and discover additional ones\n\n3.  Account for pseudonyms potentially used by multiple entities\n\n4.  Demonstrate how these visualizations simplify entity identification\n\n5.  Explain how understanding pseudonyms changes interpretation of activities\n\n**Task 4: Nadia Conti Investigation**\n\n1.  Use visual analytics to provide evidence regarding possible illegal activity by Nadia Conti\n\n2.  Create a visual summary of Nadia's actions\n\n3.  Assess whether Clepper's suspicions are justified\n\nEach task builds on previous analysis to uncover the potential corruption surrounding the Nemo Reef closure and connections between officials, Sailor Shift's team, influential families, and The Green Guardians.\n\n## 3.0 Setting up\n\n### 3.1 Loading packages\n\nadd lubridata,dplyr\n\n| Package   | Description                                         |\n|:----------|:----------------------------------------------------|\n| jsonlite  | JSON parsing and generation                         |\n| tidyverse | Core data-science suite (dplyr, ggplot2, etc.)      |\n| SmartEDA  | Automated exploratory data analysis                 |\n| tidygraph | Tidy tools for graph-data manipulation and analysis |\n| ggraph    | Grammar-based graph/network visualization           |\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(\n  jsonlite,\n  tidyverse,\n  SmartEDA,\n  tidygraph,\n  ggraph,\n  lubridate,\n  dplyr)\n```\n:::\n\n\n\n2.2 Loading data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nMC3_graph <- fromJSON(\"data/MC3_graph.json\")\nglimpse(MC3_graph)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 5\n $ directed  : logi TRUE\n $ multigraph: logi FALSE\n $ graph     :List of 4\n  ..$ mode        : chr \"static\"\n  ..$ edge_default: Named list()\n  ..$ node_default: Named list()\n  ..$ name        : chr \"VAST_MC3_Knowledge_Graph\"\n $ nodes     :'data.frame':\t1159 obs. of  31 variables:\n  ..$ type             : chr [1:1159] \"Entity\" \"Entity\" \"Entity\" \"Entity\" ...\n  ..$ label            : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ name             : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ sub_type         : chr [1:1159] \"Person\" \"Person\" \"Person\" \"Person\" ...\n  ..$ id               : chr [1:1159] \"Sam\" \"Kelly\" \"Nadia Conti\" \"Elise\" ...\n  ..$ timestamp        : chr [1:1159] NA NA NA NA ...\n  ..$ monitoring_type  : chr [1:1159] NA NA NA NA ...\n  ..$ findings         : chr [1:1159] NA NA NA NA ...\n  ..$ content          : chr [1:1159] NA NA NA NA ...\n  ..$ assessment_type  : chr [1:1159] NA NA NA NA ...\n  ..$ results          : chr [1:1159] NA NA NA NA ...\n  ..$ movement_type    : chr [1:1159] NA NA NA NA ...\n  ..$ destination      : chr [1:1159] NA NA NA NA ...\n  ..$ enforcement_type : chr [1:1159] NA NA NA NA ...\n  ..$ outcome          : chr [1:1159] NA NA NA NA ...\n  ..$ activity_type    : chr [1:1159] NA NA NA NA ...\n  ..$ participants     : int [1:1159] NA NA NA NA NA NA NA NA NA NA ...\n  ..$ thing_collected  :'data.frame':\t1159 obs. of  2 variables:\n  .. ..$ type: chr [1:1159] NA NA NA NA ...\n  .. ..$ name: chr [1:1159] NA NA NA NA ...\n  ..$ reference        : chr [1:1159] NA NA NA NA ...\n  ..$ date             : chr [1:1159] NA NA NA NA ...\n  ..$ time             : chr [1:1159] NA NA NA NA ...\n  ..$ friendship_type  : chr [1:1159] NA NA NA NA ...\n  ..$ permission_type  : chr [1:1159] NA NA NA NA ...\n  ..$ start_date       : chr [1:1159] NA NA NA NA ...\n  ..$ end_date         : chr [1:1159] NA NA NA NA ...\n  ..$ report_type      : chr [1:1159] NA NA NA NA ...\n  ..$ submission_date  : chr [1:1159] NA NA NA NA ...\n  ..$ jurisdiction_type: chr [1:1159] NA NA NA NA ...\n  ..$ authority_level  : chr [1:1159] NA NA NA NA ...\n  ..$ coordination_type: chr [1:1159] NA NA NA NA ...\n  ..$ operational_role : chr [1:1159] NA NA NA NA ...\n $ edges     :'data.frame':\t3226 obs. of  5 variables:\n  ..$ id         : chr [1:3226] \"2\" \"3\" \"5\" \"3013\" ...\n  ..$ is_inferred: logi [1:3226] TRUE FALSE TRUE TRUE TRUE TRUE ...\n  ..$ source     : chr [1:3226] \"Sam\" \"Sam\" \"Sam\" \"Sam\" ...\n  ..$ target     : chr [1:3226] \"Relationship_Suspicious_217\" \"Event_Communication_370\" \"Event_Assessment_600\" \"Relationship_Colleagues_430\" ...\n  ..$ type       : chr [1:3226] NA \"sent\" NA NA ...\n```\n\n\n:::\n:::\n\n\n\n## \\[not loading \\]\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nMC3_schema <- fromJSON(\"data/MC3_schema.json\")\nglimpse(MC3_schema)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 1\n $ schema:List of 2\n  ..$ nodes:List of 3\n  .. ..$ Entity      :List of 2\n  .. ..$ Event       :List of 2\n  .. ..$ Relationship:List of 2\n  ..$ edges:List of 3\n  .. ..$ description: chr \"Connections between nodes in the knowledge graph\"\n  .. ..$ is_inferred: chr \"bool\"\n  .. ..$ types      :'data.frame':\t6 obs. of  5 variables:\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(MC3_graph,max.level = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 5\n $ directed  : logi TRUE\n $ multigraph: logi FALSE\n $ graph     :List of 4\n $ nodes     :'data.frame':\t1159 obs. of  31 variables:\n $ edges     :'data.frame':\t3226 obs. of  5 variables:\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnodes_tbl <- as_tibble(MC3_graph$nodes)\nedges_tbl <- as_tibble(MC3_graph$edges)\n```\n:::\n\n\n\nafter slpit to nodes and edges, the data shouw 3226 edges and 1159 nodes\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=nodes_tbl,\n      aes(y=`type`))+\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex03_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=nodes_tbl,\n      aes(y=`sub_type`))+\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex03_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\nGenerate Node Sub-Type Inventory\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extract unique sub_types for each node type\nentities      <- sort(unique(nodes_tbl$sub_type[nodes_tbl$type == \"Entity\"]))\nevents        <- sort(unique(nodes_tbl$sub_type[nodes_tbl$type == \"Event\"]))\nrelationships <- sort(unique(nodes_tbl$sub_type[nodes_tbl$type == \"Relationship\"]))\n\nnode_inventory <- list(\n  Entities      = entities,\n  Events        = events,\n  Relationships = relationships\n)\n```\n:::\n\n\nList down\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfor (grp in names(node_inventory)) {\n  cat(\"**\", grp, \"** (\", length(node_inventory[[grp]]), \"):\\n\", sep = \"\")\n  cat(paste0(\"  - \", node_inventory[[grp]]), sep = \"\\n\")\n  cat(\"\\n\")\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n**Entities** (5):\n  - Group\n  - Location\n  - Organization\n  - Person\n  - Vessel\n\n**Events** (11):\n  - Assessment\n  - Collaborate\n  - Communication\n  - Criticize\n  - Enforcement\n  - Fishing\n  - HarborReport\n  - Monitoring\n  - TourActivity\n  - TransponderPing\n  - VesselMovement\n\n**Relationships** (9):\n  - AccessPermission\n  - Colleagues\n  - Coordinates\n  - Friends\n  - Jurisdiction\n  - Operates\n  - Reports\n  - Suspicious\n  - Unfriendly\n```\n\n\n:::\n:::\n\n\n\nbased on the above list, we noticed that based on the task requirement, now we only focus on type=\"even\" and sub_type =\"communication\" , next step is to create communication nodes\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomm_nodes <-nodes_tbl %>%\n  filter(type==\"Event\",\n         sub_type == \"Communication\") %>%\n  select(event_id = id,timestamp)\n\nglimpse(comm_nodes)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 584\nColumns: 2\n$ event_id  <chr> \"Event_Communication_1\", \"Event_Communication_2\", \"Event_Com…\n$ timestamp <chr> \"2040-10-01 08:09:00\", \"2040-10-01 08:10:00\", \"2040-10-01 08…\n```\n\n\n:::\n:::\n\n\n\n#for edges to define sender and receiver\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=edges_tbl,\n      aes(y=`type`))+\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex03_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsent_edges <-edges_tbl %>% filter(type==\"sent\")%>%\n  select(sender = source,event_id=target)\n\nrecv_edges <-edges_tbl %>% filter(type==\"received\")%>%\n  select(event_id = source,receiver=target)\n```\n:::\n\n\n\nusing inner_join to combine sender and received\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmsgs <- sent_edges %>%\n  inner_join(recv_edges, by=\"event_id\") %>%\n  inner_join(comm_nodes, by=\"event_id\") %>%\n  mutate(ts = ymd_hms(timestamp, tz=\"UTC\")) %>%\n  mutate(date = as_date(ts), hour = hour(ts))\n```\n:::\n\n\n\nvisualizing the heatmap data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nheatmap_data <- msgs %>%\n  count(date, hour) %>%\n  complete(\n    date = seq(min(date), max(date), by = \"1 day\"),\n    hour = 0:23,\n    fill = list(n = 0)\n  )\n\nggplot(heatmap_data, aes(x=hour, y=date, fill=n)) +\n  geom_tile(color=\"white\") +\n  scale_x_continuous(\n    breaks = 0:23,\n    expand = c(0,0)\n  )+\n  scale_y_date(\n    breaks = seq(min(heatmap_data$date), max(heatmap_data$date), by = \"1 day\"),\n    date_labels = \"%b %d\",\n    expand = c(0, 0)\n  ) +\n scale_fill_distiller(\n    name    = \"Messages\",\n    palette = \"Spectral\",\n    direction = 1\n  ) +\n  \n  labs(\n    title = \"Daily Communication Patterns\",\n    x     = \"Hour of Day\",\n    y     = \"Date\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.x  = element_text(angle = 45, hjust = 1),\n    axis.text.y  = element_text(size = 8),\n    panel.grid  = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex03_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\ntimestamp included data and time, so first step we need to split to get the day and hour\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nedges_time <-nodes_tbl %>%\n  mutate(ts=ymd_hms(timestamp)) %>%\n  mutate(\n    date = as_date(ts),\n    day = day(ts),\n    hour = hour(ts)\n)\n```\n:::\n",
    "supporting": [
      "Take-home_Ex03_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}